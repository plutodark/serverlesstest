name: Serverless Delete

# only trigger on pull request closed events
on:
  pull_request:
    types: [ closed ]

jobs:
  merge:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
    - run: |
        echo PR #${{ github.event.number }} has been merged
    name: echo github.ref_name
    - run: echo ${{ github.ref_name }}

  close:
    if: github.event.pull_request.merged == false
    runs-on: ubuntu-latest
    steps:
    - run: |
        echo PR #${{ github.event.number }} has been closed without being merged
    name: echo github.ref_name
    - run: echo ${{ github.ref_name }}

      
    #  - name: Set Branch name
    #    run: |
    #      BRANCH=$(cat ${{ github.event_path }} | jq --raw-output '.ref')
    #      echo "${{ github.repository }} has ${BRANCH} branch"
    #      echo "::set-env name=STAGE::$(echo ${BRANCH})"
    #  - name: Echo Branch name
    #    run: echo Deleting from STAGE:$STAGE

      # Install npm and it's dependencies
    #  - name: npm install dependencies
    #    run: npm install

      # sls remove
    #  - name: Serverless
    #    uses: serverless/github-action@v1.53.0
    #    with:
    #      args: remove